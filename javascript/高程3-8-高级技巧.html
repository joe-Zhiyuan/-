<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>高程3-8-高级技巧</title>
</head>
<style>

</style>
<body>
    <p title="123145"> 123</p>
</body>
<script>
    //测试构造函数名
    var type1 = new Array();
    console.log(Object.prototype.toString.call(type1));
    //是否原生函数
    function isFunction(value){
        return Object.prototype.toString.call(value) === "[Object function]";
    }
    //是否正则表达式
    function isRegExp(value){
        return Object.prototype.toString.call(value) === "[Object RegExp]";
    }
    //创建一个作用域安全的构造函数 防止不写new
    function Person(name,job,age){
        if(this instanceof Person){
            this.name = name;
            this.job = job;
            this.age = age;
        }else{
            return new Person(name,job,age);
        }
    }
    var person1 = Person("joe","internet",22);
    console.log(window.name);// ""
    console.log(person1.name);// joe
    var person2 = new Person("qiao","it","21");
    console.log(person2.name);

    //a的值不变
    var a = 10;
    function foo(b){
        b = b+20;
        return b;
    }
    foo(a);
    console.log(a);
    console.log(foo(a));//30
    //闭包
    function Fun(){
        var c = "joe";
        function sayName(){
            console.log(c);
        }
        return sayName;
    }
    var Fun1 = Fun();
    Fun1();//能访问  c

    function makeAdder(x){
        return function(y){
            return x + y;
        }
    }
    var add5 = makeAdder(5);
    var add10 = makeAdder(10);

    console.log(add5(2));
    console.log(add10(2));

    //数据绑定
    var d = 10;
    var module = {
      d : 99,
      getD: function(){
          return this.d;
      }
    };
    console.log(module.getD());//99
    var getD2 = module.getD;
    console.log(getD2());//10  指向全局对象
    var getD3 = getD2.bind(module);
    console.log(getD3());//99 绑定了作用域

    //不可扩展对象
    var person = {
        name : "joe"
    };
    Object.preventExtensions(person);
    person.age = 23;//undefined 无效
    console.log(person.age);
    person.name = "qiao";
    console.log(person.name);//可修改
    //密封对象
    Object.seal(person);
    delete person.name;//被忽略  删除person.name
    console.log(person.name);
    //冻结对象
    Object.freeze(person);
    person.age = 23;//undefined 无效
    console.log(person.age);
    person.name = "joe--";
    console.log(person.name);//qiao 无法修改
</script>
</html>