<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>高程3-10-实践</title>
    <style>
        img{
            width:5%;
        }
        #msg{
            height:30px!important;
        }
        #status{
            width:600px;
            height:200px;
            background: #cccccc;
            position: relative;
        }
    </style>
</head>
<body>
<img src="images/2.jpg" alt="美女" id="thisImg" onerror="bgImg()"/>
<div id="msg"></div>
<div id="status"></div>
</body>
<script>
    //onerror 加载文档或图片出错 加载方法
    function bgImg() {
        var thisImg = document.getElementById("thisImg");
        thisImg.setAttribute("src", "images/1.jpg");
    }
    //避免全局查找
    function updateUI() {
        var doc = document;
        var imgs = doc.getElementsByTagName("img");
        for (var i = 0, len = imgs.length; i < len; i++) {
            imgs[i].title = doc.title + "image" + i;
        }
        var msg = document.getElementById("msg");
        console.log(msg);
        msg.innerHTML = "update complete"
    }
    updateUI();
    //避免使用with() 创建自己的作用域替代参数的作用域
    //不要使用
    // function updateBody(){
    //     with(document.body){
    //        console.log(tagName);
    //        innerHTML = "hello world";
    //     }
    // }
    function updateBody(){
        var body = document.body;
        console.log(body.tagName);
        // body.innerHTML = "hello world";
    }
    window.onload = function(){
        updateBody();
    };
    //避免双重解释
    eval('console.log("hello world")');
    var sayHi = new Function("console.log('hi')");
    sayHi();
    setTimeout("console.log('hello')",500);
    //更简单的创建数组，创建函数
    var value = [123,456,789];
    var person = {
      name:"qiao",
      age:22,
      sayName:function(){
          console.log(this.name);
      }
    };
    //题目
    var name = "qiao";
    (()=>{
        console.log(name);//为 undefined 由于内部var name变量提升 所以执行 goodbye Joe
        if(typeof name === 'undefined'){
            var name = 'joe';
            console.log('goodbye'+name);
        }else{
            console.log("hello"+name);
        }
    })();
    //动画API requestAnimationFrame
    var start = null;
    var div = document.getElementById("status");
    //time:时间码，表示下一次重绘的时间
    function updataProgress(time){
        if(!start){
            start = time;
        }
        //计算两次重绘的时间间隔
        var progress = time - start;
        console.log(progress);
        //计算偏移量 间隔/10
        div.style.left = Math.min(progress/10, 200) + "px";
        //控制偏移量 2000/10 200px
        if(progress<2000) {
            window.requestAnimationFrame(updataProgress);
        }
    }
    window.requestAnimationFrame(updataProgress);
    //
</script>
</html>